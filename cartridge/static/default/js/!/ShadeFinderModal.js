(function(){var t;t={$el:$('<div class="shade-finder"></div>'),$iframe:$('<iframe class="shade-finder-iframe" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),attributes:{replace:!1,loading:!1,url:"/on/demandware.store/Sites-BareMinerals_US_CA-Site/default/ShadeFinder-Show",callback:void 0,baseUrl:location.pathname,hash:"#ShadeFinder-Show",hasPush:history&&history.pushState},pushState:function(){return this.attributes.hasPush&&$.trim(location.hash)!==this.attributes.hash&&history.pushState({d:"Open Shade Finder"},"Shade Finder",this.attributes.baseUrl+this.attributes.hash),this},startState:function(){return this.attributes.hasPush?(history.replaceState({d:"Closed"},null,this.attributes.baseUrl),this.open()):this.open(),this},create:function(t){var e;return e=!0,t.append(this.$el),$.trim(location.hash)===this.attributes.hash&&this.startState(),this.attributes.hasPush?window.onpopstate=function(t){return function(i){return e||(null==i.state||null!=i.state.d&&"Closed"===i.state.d?t.hide():t.open(!1)),e=!1}}(this):void 0},load:function(t){return this.attributes.callback=t},loaded:function(){return this.attributes.callback&&"function"==typeof this.attributes.callback?this.attributes.callback():void 0},loading:function(t){return t?(this.attributes.loading=t,this):this.attributes.loading},url:function(t){return t?(this.attributes.url=t,this):this.attributes.url},open:function(t){return t!==!1&&this.pushState(),this.loading()?this.show():this.loading(!0).append().show().render(function(t){return function(){return setTimeout(function(){return t.loaded()},200)}}(this))},close:function(){return history.back(),this.hide(),/(iPad)/g.test(navigator.userAgent)&&$("meta[data-shadefinder=true]").remove(),this},hide:function(){return $("html").removeClass("shade-finder-shown"),this.$el.removeClass("show").addClass("hide"),app&&app.minicart&&"function"==typeof app.minicart.add2&&(("undefined"==typeof invokeCoremetrics_addProdToBag2||null===invokeCoremetrics_addProdToBag2)&&(window.invokeCoremetrics_addProdToBag2=function(){}),app.minicart.add2("","","","null")),this},show:function(){return $("html").addClass("shade-finder-shown"),this.$el.removeClass("hide").addClass("show"),this},append:function(){var t,e,i;return i=$(window),e=i.width(),t=i.height(),/(iPad)/g.test(navigator.userAgent)&&t>e&&$("head").append('<meta name="viewport" data-shadefinder="true" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">'),this.$iframe.attr("height",t).attr("width",e),this.$el.append(this.$iframe),this},render:function(t){return this.$iframe.load(function(){return t()}),this.$iframe[0].contentWindow.location.replace(this.url())}},$(function(){return t.create($("body")),$(".show-shadefinder, .bm_sub_foundation_finder, .be_sub_foundation_finder").click(function(e){return e.preventDefault(),/(MSIE 8)/g.test(navigator.userAgent)?window.open(t.attributes.url,"_blank","menubar=no,toolbar=no,titlebar=no,status=no,location=no,resizable=yes"):t.open()}),/(MSIE 8)/g.test(navigator.userAgent)?$(window).on("focus",function(){return t.hide()}):void 0}),window.ShadeFinder=t}).call(this);