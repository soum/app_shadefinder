(function(){var t=function(t,i){function n(){this.constructor=t}for(var s in i)e.call(i,s)&&(t[s]=i[s]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t},e={}.hasOwnProperty;define("BE.Views.Shade",["UI","View","BE.Logic"],function(e,i,n){var s,o;return s=e.Browser,o=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.template=_.template('<div class="shade shade-<%= id %> undertones-<%= _.size(options) %>" data-value="<%= id %>" data-category="Shade"><div class="background"><div class="buttons"><% _.each(options, function(option, j) { %><% var cssClass = j.toLowerCase().replace(/\\s/gi, "-"); %><% console.log(j); %><% var y = ShadeFinder.undertones[j]; %><div class="example navigate undertone" data-value="<%= j %>" data-category="<%= family %> Undertone"><div class="image <%= id.toLowerCase() %>-<%= cssClass %>"></div><div class="button-wrap"><% if (y) { %><div class="undertone-button" style="background-color: <%= y.color %>;"><div class="undertone-button-inner"><span class="title"><%= y.title %></span><span class="subtitle"><%= y.description %></span><span class="subtitle"><%= y.undertone %></span></div></div><% } %></div></div><% }); %></div></div><div class="toggle"><h4><%= id %></h4></div></div>'),i.prototype.initialize=function(){return this.model.on("create",this.create,this),this.model.on("destroy",this.destroy,this),this.model.on("change:active",this.active,this),s.on("resize",this.resize,this),this.model.collection.on("render",this.resize,this),this.model.on("change:top",this.top,this),this.model.collection.on("undertoned",this.undertoned,this),this.model.set({family:n.get("family")[0].toUpperCase()})},i.prototype.create=function(t){var e;return t.append(this.template(this.model.attributes)),e=t.find(".shade"),this.$el=e.last(),this.delegateEvents(),this.active(this.model,this.model.get("active")),this.resize(),this.top(),this.model.on("resized",s.debounce(function(t){return function(){return t.resized()}}(this),400))},i.prototype.destroy=function(){return this.undelegateEvents()},i.prototype.resize=function(){return this.model.set({innerHeight:this.$el.find(".buttons").outerHeight(!0),toggleHeight:this.$el.find(".toggle").outerHeight()}),this.model.trigger("resized")},i.prototype.resized=function(){var t;if(t=0,this.$el.find(".undertone-button-inner").each(function(){var e;if(e=$(this).outerHeight(!0),e>t)return t=e}),t>10)return this.$el.find(".undertone-button").height(t)},i.prototype.top=function(){var t;return t=s.transform("top",this.model.get("top")+"px"),this.$el.css(t[0],t[1])},i.prototype.active=function(t,e){return e?(this.$el.addClass("active"),this.$el.parent().addClass("active-"+this.model.id)):(this.$el.removeClass("active"),this.$el.parent().removeClass("active-"+this.model.id))},i.prototype.undertoned=function(t){return this.$el.find(".undertone").removeClass("selected").end().find('[data-value="'+t+'"]').addClass("selected")},i.prototype.events={"click .toggle":function(t){return t.preventDefault(),this.model.set({active:!0})},"click .undertone":function(t){return t.preventDefault(),this.model.set({undertone:$(t.currentTarget).data("value")}),this.model.trigger("undertone",$(t.currentTarget).data("value"))}},i}(i)})}).call(this);